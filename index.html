<!DOCTYPE html>
<html lang="en">
<head>
   <script type="text/javascript" src="http://classic.avantlink.com/affiliate_app_confirm.php?mode=js&authResponse=43ad20150c666c63ae6d1a68bbbbb77f650b47d4"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FishingTackle.ai - AI Fishing Gear + Tips</title>
    <meta name="description" content="Instant AI-powered tackle recommendations for exactly where, when, and what fish you're chasing.">
    <style>
        :root { --p: #0066cc; --s: #28a745; }
        body { font-family: system-ui, sans-serif; margin:0; background:#f8f9fa; color:#222; line-height:1.6; }
        header { background: linear-gradient(135deg, #0066cc, #004d99); color:white; text-align:center; padding:50px 20px; }
        h1 { margin:0; font-size:2.8em; }
        main { max-width:720px; margin:20px auto; padding:0 15px; }
        form, #out { background:white; border-radius:16px; padding:30px; box-shadow:0 12px 40px rgba(0,0,0,0.1); }
        label { display:block; margin:20px 0 8px; font-weight:700; font-size:1.1em; }
        input, select { width:100%; padding:14px; border:1px solid #ddd; border-radius:10px; font-size:1.1em; }
        button { margin-top:30px; width:100%; padding:18px; background:var(--s); color:white; border:none; border-radius:10px; font-size:1.3em; font-weight:bold; cursor:pointer; }
        button:hover { background:#218838; }
        #out { display:none; margin-top:40px; }
        .sec { margin-top:50px; }
        .item { background:#f8f9fa; padding:18px; margin:15px 0; border-radius:10px; border-left:6px solid var(--p); }
        .links { margin-top:12px; font-size:0.95em; }
        .links a { margin-right:18px; color:var(--p); font-weight:600; text-decoration:none; }
        .links a:hover { text-decoration:underline; }
        .disc { text-align:center; font-size:0.85em; color:#666; margin:50px 0; }
        .load { text-align:center; padding:50px; font-size:1.2em; }
        .optional { color:#666; font-weight:normal; font-size:0.95em; }
    </style>
</head>
<body>
<header>
    <h1>FishingTackle.ai</h1>
    <p>Tell me where you're fishing â†’ get exact gear + pro tips that are working right now</p>
</header>
<main>
<form id="f">
    <label>Location (e.g. Destin FL, Lake Lanier, Cape Cod)</label>
    <input type="text" id="loc" required placeholder="City + state or specific spot">

    <label>Date (optional â€“ improves seasonal accuracy)</label>
    <input type="date" id="date">

    <label>Target Species <span class="optional">(optional â€“ makes recommendations even better)</span></label>
    <input type="text" id="species" placeholder="e.g. Redfish, Largemouth Bass, Striped Bass, Rainbow Trout, Snook">

    <label>Body of Water</label>
    <select id="body" required>
        <option value="">Choose...</option>
        <option>Saltwater / Ocean</option>
        <option>Inshore / Bay / Flats</ option>
        <option>Lake</option>
        <option>River / Stream</option>
        <option>Surf / Beach</option>
    </select>

    <label>Fishing Style</label>
    <select id="type" required>
        <option value="">Choose...</option>
        <option>Surf Casting</option>
        <option>Inshore / Flats</option>
        <option>Offshore / Deep Sea</option>
        <option>Bass Fishing</option>
        <option>Trout / Stream</option>
        <option>Fly Fishing</option>
        <option>Ice Fishing</option>
        <option>Kayak / Wade</option>
    </select>

    <button type="submit">Get My Tackle List â†’</button>
</form>

<div id="out">
    <div class="load" id="load">Asking the fish godsâ€¦ ðŸŽ£</div>
    <div id="gear-sec" class="sec" style="display:none"><h2>Recommended Gear (2025 top-sellers)</h2><div id="gear"></div></div>
    <div id="tips-sec" class="sec" style="display:none"><h2>Pro Tips & Whatâ€™s Biting Right Now</h2><div id="tips"></div></div>
</div>

<p class="disc">Disclosure: We may earn commission on purchases (keeps the site free).</p>
</main>

<script type="module">
    const f = document.getElementById('f');
    const out = document.getElementById('out');
    const load = document.getElementById('load');
    const gearSec = document.getElementById('gear-sec');
    const gearDiv = document.getElementById('gear');
    const tipsSec = document.getElementById('tips-sec');
    const tipsDiv = document.getElementById('tips');

    f.addEventListener('submit', async e => {
        e.preventDefault();
        out.style.display = 'block';
        gearSec.style.display = tipsSec.style.display = 'none';
        load.style.display = 'block';
        gearDiv.innerHTML = tipsDiv.innerHTML = '';

        const loc = document.getElementById('loc').value.trim();
        const date = document.getElementById('date').value || 'current season';
        const species = document.getElementById('species').value.trim();
        const body = document.getElementById('body').value;
        const type = document.getElementById('type').value;

        const speciesPart = species ? `Target species: ${species}\n` : '';

        const prompt = `You are the #1 fishing tackle expert in 2025.

${speciesPart}Location: ${loc}
Date/Season: ${date}
Water: ${body}
Style: ${type}

Respond EXACTLY this format (no extra text):

GEAR:
1. Rod â†’ Exact real 2025 model name
2. Reel â†’ Exact real model
3. Line â†’ Exact brand + spec
4. Leader â†’ Exact product
5. Lure/Bait 1 â†’ Exact top-selling lure/bait for ${species || 'these conditions'} right now
6. Lure/Bait 2 â†’ â€¦
7. Lure/Bait 3 â†’ â€¦
8. Accessories â†’ Exact pliers, net, clothing etc.

TIPS:
1. Tip title â€“ full explanation tailored to ${species || 'these conditions'}
2. etc.

Only recommend products that are 4.5+ stars and actual 2025 best-sellers on TackleDirect/Amazon/Bass Pro.`;

     try {
    const r = await fetch('/api/recommend', {  // Call your own serverless endpoint
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt })  // Send the prompt to your API route
    });

    if (!r.ok) throw new Error('API error');
    const d = await r.json();
    const txt = d.choices[0].message.content;

    // Parse GEAR (same as before)
    const gearPart = txt.split('TIPS:')[0].split('GEAR:')[1] || '';
    gearPart.trim().split('\n').filter(l => l.match(/^\d+/)).forEach(l => {
        const clean = l.replace(/^\d+\.\s*/, '').split('â†’')[1]?.trim() || l;
        const div = document.createElement('div'); div.className = 'item';
        div.innerHTML = `<strong>${l.replace(/^\d+\.\s*/, '')}</strong><div class="links">
           
            <a href="https://amazon.com/s?k=${encodeURIComponent(clean)}&tag=fishingtac0b6-20" target="_blank">Amazon</a>
            <a href="https://www.fishusa.com/search/?q=${encodeURIComponent(clean)}" target="_blank">FishUSA</a>
        </div>`;
        gearDiv.appendChild(div);
    });

    // Parse TIPS (same as before)
    const tipsPart = txt.split('TIPS:')[1] || '';
    tipsPart.trim().split('\n').filter(l => l.match(/^\d+/)).forEach(l => {
        const div = document.createElement('div'); div.className = 'item';
        div.innerHTML = l.trim();
        tipsDiv.appendChild(div);
    });

    load.style.display = 'none';
    gearSec.style.display = tipsSec.style.display = 'block';
} catch (err) {
    load.innerHTML = 'Error â€” try again or check your setup.';
}
    });
</script>
</body>
</html>
